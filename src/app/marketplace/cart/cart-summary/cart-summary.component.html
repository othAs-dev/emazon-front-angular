<div class="flex flex-col">
    <h3 class="font-bold text-lg">Récapitulatif :</h3>
    <mat-card class="flex flex-col">
        <mat-card-content class="mt-5">
            <div class="border-b border-gray-300">
                <div *ngFor="let pr of productRecap " class="flex flex-row pb-3 pt-3">
                    <div class="p-1 h-fit border rounded-md border-gray-400 mr-3">
                        <img [alt]="pr.name" [ngSrc]="'http://localhost:8000/'+pr.imgSrc" height="50" width="50">
                    </div>
                    <div class="w-full">
                        <div>
                            <p class="font-bold">{{ pr.name }}</p>
                            <p class="text-orange-500 text-right">{{ pr.price | currency : 'EUR' }}</p>
                        </div>
                        <div>
                            <div class="flex justify-between">
                                <p>Livraison</p>
                                <p>{{ pr.delivery | currency : 'EUR' }}</p>
                            </div>
                            <div class="flex justify-between">
                                <p>Emballage</p>
                                <p>{{ pr.packaging | currency : 'EUR' }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="totalWithoutTaxes | async as total" class="mt-3 pb-3 border-b border-gray-300">
                <div class="flex justify-between">
                    <p>Sous-total</p>
                    <p>
                        {{ total | currency : "EUR" }}
                    </p>
                </div>
                <div class="flex justify-between">
                    <p>Emballage</p>
                    <p>
                        {{ totalPackaging | async | currency : "EUR" }}
                    </p>
                </div>
                <div class="flex justify-between">
                    <p>Livraison</p>
                    <p>
                        {{ totalShipping | async | currency : "EUR" }}
                    </p>
                </div>
                <div class="flex justify-between">
                    <p class="underline">Frais de service Emazon</p>
                    <p>{{ total * 0.05  | currency: "EUR" }}</p>
                </div>
                <div class="flex justify-between">
                    <p>T.V.A</p>
                    <p>{{ total * 0.2 | currency: 'EUR' }}</p>
                </div>
            </div>
            <div class="pt-3 flex flex-col">
                <div class="flex justify-between">
                    <p class="font-bold">Total TTC</p>
                    <p>{{ totalProductAmount | async | currency : 'EUR' }}</p>
                </div>
                <div>
                    <button class="w-full mt-3" color="primary" mat-raised-button>Passer la commande</button>
                    <div class="flex justify-center mt-2">
                        <mat-icon>
                            lock
                        </mat-icon>
                        <span class="text-gray-600">Paiement sécurisé</span>
                    </div>
                    <p class="text-xs mt-2">En passant commande vous acceptez nos <span class="font-bold">Conditions
                        générales
                        d'utilisation</span>,
                        nos <span class="font-bold">Conditions générales de vente</span> et notre <span
                                class="font-bold">politique
                            de protection des données</span>
                    </p>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>
