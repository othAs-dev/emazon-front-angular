<section *ngIf="products.length === 0; else cartNotEmpty"
         class="flex justify-around items-center flex-col tablet:flex-row h-1/3">
  <div class="flex flex-col gap-4">
    <div>
      <p class="font-thin text-gray-600">Ça casse un peu l'ambiance...</p>
      <p class="text-4xl font-bold">Il n'y a rien dans votre panier.</p>
      <p class="font-thin">Tous ces incroyables produits ne vont pas s'acheter tout seuls !</p>
    </div>
    <div>
      <button color="primary" mat-raised-button routerLink="/home">Voir les bonnes affaires</button>
    </div>
  </div>
  <div>
    <img alt="empty-cart" class="w-96" src="../../../assets/404.svg">
  </div>
</section>
<ng-template #cartNotEmpty>
  <section class="flex flex-col tablet:flex-row laptop:flex-row flex-wrap">
    <section class="p-5 w-full tablet:w-7/12 laptop:w-8/12">
      <section class="mb-10">
        <div class="flex flex-col justify-center gap-y-3 ">
          <div>
            <h3 class="font-bold text-lg  laptop:text-xl">Votre panier :</h3>
          </div>
          <mat-card class="p-6" *ngFor="let pr of productRecap">
            <mat-card-content class="mt-5">
                <div class="flex flex-row">
                  <div class="p-1 h-fit  mr-3">
                    <img [alt]="pr.productName" [ngSrc]="pr.imageSrc" height="80" width="80">
                  </div>
                  <div class="w-full flex flex-col">
                    <div class="flex justify-between">
                      <p class="font-bold">{{pr.productName}}</p>
                      <p class="text-orange-500 font-bold">{{pr.price}}</p>
                    </div>
                    <span class="text-green-500">Plus que 10 en stock</span>
                    <div class="flex justify-end mt-2">
                      <div class="flex flex-row gap-2 items-center">
                        <select class="py-2 px-2 pr-2 block w-14 border-gray-300 rounded-md h-9 text-sm focus:border-blue-500 focus:ring-blue-500 border">
                          <option value="ONE">1</option>
                          <option value="TWO">2</option>
                          <option value="THREE">3</option>
                          <option value="FOUR">4</option>
                          <option value="FIVE">5</option>
                        </select>
                        <button mat-stroked-button (click)="deleteFn()" color="warn" class="text-sm">
                          Supprimer
                          <mat-icon>delete</mat-icon>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
            </mat-card-content>
          </mat-card>
        </div>
      </section>
      <section class="mb-10">
        <mat-card class="p-0">
          <mat-card-content>
            <div class="flex justify-between items-center w-full">
              <div class="flex flex-row gap-3">
                <mat-icon>card_giftcard</mat-icon>
                <p class="text-sm laptop:text-base">Emballage cadeau <span
                  class="text-gray-500 text-sm tablet:text-base">(+2<sup>30</sup>€)</span></p>
              </div>
              <div>
                <button
                  (click)="addGiftWrap()"
                  [disabled]="giftWrap"
                  class="text-xs laptop:text-base"
                  color="primary"
                  mat-stroked-button
                >
                  Ajouter un emballage
                </button>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </section>
      <section class="mb-10">
        <div class="flex flex-col justify-center gap-y-3 ">
          <div>
            <h3 class="font-bold text-lg  laptop:text-xl">Complétez votre panier :</h3>
          </div>
          <div>
            <app-product-carousel [products]="productsData"/>
          </div>
        </div>
      </section>
      <section class="mb-10">
        <div class="flex flex-col justify-center gap-y-3 ">
          <div>
            <h3 class="font-bold text-lg  laptop:text-xl">Vos avantages à chaque achat :</h3>
          </div>
          <mat-card class="p-6">
            <div class="flex flex-row flex-wrap gap-8">
              <div *ngFor="let b of benefitsData; trackBy: trackByBenefitsId" class="flex gap-2 items-center">
                <mat-card-content class="border border-y-gray-300 p-2 rounded-xl bg-[#fcf2e3]">
                  <mat-icon>
                    {{b.icon}}
                  </mat-icon>
                </mat-card-content>
                <p>{{b.text}}</p>
              </div>
            </div>
          </mat-card>
        </div>
      </section>
    </section>
    <section class="p-5 w-full bg-white flex flex-col gap-5 tablet:w-5/12 laptop:w-4/12">
      <div class="flex flex-col">
        <h3 class="font-bold text-lg">Récapitulatif :</h3>
        <mat-card class="flex flex-col">
          <mat-card-content class="mt-5">
            <div class="border-b border-gray-300">
              <div *ngFor="let pr of productRecap" class="flex flex-row pb-3 pt-3">
                <div class="p-1 h-fit border rounded-md border-gray-400 mr-3">
                  <img [alt]="pr.productName" [ngSrc]="pr.imageSrc" height="50" width="50">
                </div>
                <div class="w-full">
                  <div>
                    <p class="font-bold">{{pr.productName}}</p>
                    <p class="text-orange-500">{{pr.price}}</p>
                  </div>
                  <div>
                    <div class="flex justify-between">
                      <p>Livraison</p>
                      <p>{{pr.delivery}}</p>
                    </div>
                    <div class="flex justify-between">
                      <p>Emballage</p>
                      <p>{{pr.packaging}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-3 pb-3 border-b border-gray-300">
              <div class="flex justify-between">
                <p>Sous-total</p>
                <p>2510.00€</p>
              </div>
              <div class="flex justify-between">
                <p class="underline">Frais de service Emazon</p>
                <p>7.99</p>
              </div>
            </div>
            <div class="pt-3 flex flex-col">
              <div class="flex justify-between">
                <p class="font-bold">Total TTC</p>
                <p> 2517.99€</p>
              </div>
              <div>
                <button class="w-full mt-3" color="primary" mat-raised-button>Passer la commande</button>
                <div class="flex justify-center mt-2">
                  <mat-icon>
                    lock
                  </mat-icon>
                  <span class="text-gray-600">Paiement sécurisé</span>
                </div>
                <p class="text-xs mt-2">En passant commande vous acceptez nos <span class="font-bold">Conditions générales d'utilisation</span>,
                  nos <span class="font-bold">Conditions générales de vente</span> et notre <span class="font-bold">politique de protection des données</span>
                </p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
      <mat-card class="flex flex-col">
        <mat-card-header>
          <h3 class="font-bold text-lg">Un code promo ?</h3>
        </mat-card-header>
        <mat-card-content class="mt-5">
          <div class="flex flex-row flex-wrap">
            <form (ngSubmit)="submit()" [formGroup]="form" class="w-full">
              <formly-form [fields]="fields" [form]="form" [model]="model" [options]="options"></formly-form>
              <div class="flex w-full">
                <button
                  [disabled]="!form.valid"
                  class="text-xs w-full h-fit tablet:text-sm laptop:text-md desktop:text-lg"
                  color="primary"
                  mat-raised-button
                  type="submit"
                >
                  Valider
                </button>
              </div>
            </form>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card class="flex flex-col">
        <mat-card-header>
          <h3 class="font-bold text-lg">Nous acceptons</h3>
        </mat-card-header>
        <mat-card-content class="mt-5">
          <div class="flex flex-row flex-wrap">
            <img *ngFor="let p of payementMethodData; trackBy : trackByPayementMethodId" [alt]="p.alt" [ngSrc]="p.src"
                 class="tablet:w-12 laptop:w-16" height="50" width="65">
          </div>
        </mat-card-content>
        <mat-card-footer class="border-t-2 w-full mt-5">
          <div class="flex justify-center gap-3 mt-3 mb-3  flex-row items-center">
            <mat-icon>lock</mat-icon>
            <p>paiement 100% sécurisé</p>
          </div>
        </mat-card-footer>
      </mat-card>
    </section>
  </section>
</ng-template>
<app-footer />
