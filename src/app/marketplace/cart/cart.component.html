<section *ngIf="(productRecap | async)?.length === 0; else cartNotEmpty"
         class="flex justify-around items-center flex-col tablet:flex-row h-1/3">
  <div class="flex flex-col gap-4 w-4/5">
    <div>
      <p class="text-4xl text-center text-gray-600">Ça casse un peu l'ambiance...</p>
      <p class="text-7xl font-bold text-center">Il n'y a rien dans votre panier.</p>
      <img alt="empty-cart" class="w-[90%]" src="assets/404.svg">
      <p class="font-thin">Tous ces incroyables produits ne vont pas s'acheter tout seuls !</p>
    </div>
    <div>
      <button color="primary" mat-raised-button routerLink="/home">Voir les bonnes affaires</button>
    </div>
  </div>

</section>
<ng-template #cartNotEmpty>
  <section *ngIf="productRecap | async as product" class="flex flex-col tablet:flex-row laptop:flex-row flex-wrap">
    <section class="p-5 w-full tablet:w-7/12 laptop:w-8/12">
      <section class="mb-10">
        <app-cart-item [productRecap]="product" />
      </section>
      <section class="mb-10">
        <mat-card class="p-0">
          <mat-card-content>
            <div class="flex justify-between items-center w-full">
              <div class="flex flex-row gap-3">
                <mat-icon>card_giftcard</mat-icon>
                <p class="text-sm laptop:text-base">Emballage cadeau <span
                    class="text-gray-500 text-sm tablet:text-base">(+2<sup>30</sup>€)</span></p>
              </div>
              <div>
                <button
                    (click)="addGiftWrap()"
                    [disabled]="giftWrap"
                    class="text-xs laptop:text-base"
                    color="primary"
                    mat-stroked-button
                >
                  Ajouter un emballage
                </button>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </section>
      <section class="mb-10">
        <div class="flex flex-col justify-center gap-y-3">
          <h3 class="font-bold text-lg  laptop:text-xl">Complétez votre panier :</h3>
          <app-product-card-carousel [products]="pageContent.products" />
        </div>
      </section>
      <section class="mb-10">
        <div class="flex flex-col justify-center gap-y-3 ">
          <div>
            <h3 class="font-bold text-lg  laptop:text-xl">Vos avantages à chaque achat :</h3>
          </div>
          <mat-card class="p-6">
            <div class="flex flex-row flex-wrap gap-8">
              <div *ngFor="let b of benefitsData; trackBy: trackByBenefitsId" class="flex gap-2 items-center">
                <mat-card-content class="border border-y-gray-300 p-2 rounded-xl bg-amber-100">
                  <mat-icon>
                    {{ b.icon }}
                  </mat-icon>
                </mat-card-content>
                <p>{{ b.text }}</p>
              </div>
            </div>
          </mat-card>
        </div>
      </section>
    </section>
    <section class="p-5 w-full bg-white flex flex-col gap-5 tablet:w-5/12 laptop:w-4/12">
      <app-cart-summary [productRecap]="product" />
      <mat-card class="flex flex-col">
        <mat-card-header>
          <h3 class="font-bold text-lg">Un code promo ?</h3>
        </mat-card-header>
        <mat-card-content class="mt-5">
          <div class="flex flex-row flex-wrap">
            <form (ngSubmit)="submit()" [formGroup]="form" class="w-full">
              <formly-form [fields]="fields" [form]="form" [model]="model"></formly-form>
              <div class="flex w-full">
                <button
                    [disabled]="!form.valid"
                    class="text-xs w-full h-fit tablet:text-sm laptop:text-md desktop:text-lg"
                    color="primary"
                    mat-raised-button
                    type="submit"
                >
                  Valider
                </button>
              </div>
            </form>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card class="flex flex-col">
        <mat-card-header>
          <h3 class="font-bold text-lg">Nous acceptons</h3>
        </mat-card-header>
        <mat-card-content class="mt-5">
          <div class="flex flex-row flex-wrap">
            <img *ngFor="let p of payementMethodData; trackBy : trackByPayementMethodId" [alt]="p.alt" [ngSrc]="p.src"
                 class="tablet:w-12 laptop:w-16" height="50" width="65">
          </div>
        </mat-card-content>
        <mat-card-footer class="border-t-2 w-full mt-5">
          <div class="flex justify-center gap-3 mt-3 mb-3  flex-row items-center">
            <mat-icon>lock</mat-icon>
            <p>paiement 100% sécurisé</p>
          </div>
        </mat-card-footer>
      </mat-card>
    </section>
  </section>
</ng-template>
<app-footer />
